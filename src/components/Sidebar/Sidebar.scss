@import 'src/styles/variables';

.sidebar {
  position: fixed;
  z-index: 2;
  left: 0;
  top: 0;
  @include size($sidebar-width, 100%);
  @include flex-column(flex-start, flex-start);
  padding: $sidebar-padding;
  transition: 0.5s 0.05s ease-in-out;
  overflow: hidden;
  background-color: $sidebar-background-color;

  &.deactivate {
    transition: 0.2s ease-in-out; // temporarily quicken the transition
    pointer-events: none;
  }

  @include active(sidebar--active) { // active sidebar
    width: $sidebar-active-width;
    padding-left: $sidebar-horizontal-padding * 2;
    padding-right: $sidebar-horizontal-padding * 2;
    cursor: pointer;

    .category,
    .add-category {
      &__icon {
        margin-right: $sidebar-horizontal-padding / 2;
      }
    }

    + .sidebar-overlay {
      pointer-events: all;
      opacity: 1;
      cursor: pointer;
    }
  }

  &-overlay {
    position: absolute;
    z-index: 1;
    @include size(100%);
    background-color: $sidebar-overlay-color;
    transition: 0.5s 0.05s ease-in-out;
    opacity: 0;
    pointer-events: none;
  }

  .category,
  .add-category {
    color: $sidebar-color;

    &__icon {
      @include size-absolute($sidebar-icon-size);
      margin-right: $sidebar-horizontal-padding;
      color: $sidebar-icon-color;
      font-size: $sidebar-icon-size;
      transition: 0.2s ease-in-out;
    }
  }

  .add-category,
  .category {
    $category-max-width: $sidebar-active-width - 2 * ($sidebar-horizontal-padding * 2);
    max-width: $category-max-width;
    @include flex-row(flex-start, center);
    white-space: nowrap;
    font-size: $sidebar-item-font-size;
    cursor: pointer;

    input {
      width: $category-max-width - $sidebar-icon-size - $sidebar-horizontal-padding - $sidebar-edit-margin-left - $sidebar-item-font-size;
    }

    &__name {
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    @include active() { // active sidebar item
      .add-category,
      .category {
        &__icon {
          margin-right: $sidebar-horizontal-padding;
        }

        &__name {
          color: $sidebar-active-color;
        }
      }
    }
  }

  .category {
      margin-bottom: 1rem;

    &__control {
      margin-left: $sidebar-edit-margin-left;
      color: $sidebar-color;

      @include active() {
        color: $sidebar-active-color;
      }

      + .category__control {
        margin-left: $sidebar-edit-margin-left / 4;
      }
    }
  }

  .add-category {
    margin-bottom: 3rem;
    color: $sidebar-color;
  }
}
